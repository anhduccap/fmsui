<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/reset.css">
    <link rel="stylesheet" href="/stylesheets/base.css">
    <link rel="stylesheet" href="/stylesheets/main.css">
    <link rel="icon" href="/images/logo.png">
    <title>Statistics</title>
</head>
<body>
    <div class="app">
        <div class="container-fluid">
            <div class="content">
                <div class="row g-0">
                    <div class="d-none d-md-block col-md-2">
                        <div class="navbar">
                            <div class="logo">
                                <img src="/images/logo.png" alt="logo">
                                <p>MANCHESTER UNITED</p>
                            </div>
                            <div class="main-menu">
                                <ul class="menu-list">
                                    <li class="menu-item">
                                        <a href="/" class="menu-link">
                                            <span class="material-icons">space_dashboard</span>
                                            <p>Dashboard</p>
                                        </a>
                                    </li>
                                    <li class="menu-item menu-item--active">
                                        <a href="/stat" class="menu-link menu-link--active">
                                            <span class="material-icons">poll</span>
                                            <p>Statistics</p>
                                        </a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="" class="menu-link">
                                            <span class="material-icons">event</span>
                                            <p>Events</p>
                                        </a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="" class="menu-link">
                                            <span class="material-icons">text_snippet</span>
                                            <p>Lectures</p>
                                        </a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="" class="menu-link">
                                            <span class="material-icons">notifications</span>
                                            <p>Announcements</p>
                                        </a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="" class="menu-link">
                                            <span class="material-icons">account_circle</span>
                                            <p>Personal</p>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="sponsors">
                                <div class="sponsors__title">
                                    <p>Sponsors</p>
                                    <div class="title-sub"></div>
                                </div>
                                <ul class="sponsor-list">
                                    <li class="sponsor-item">
                                        <img src="/images/sponsor_adidas.png" alt="" height="45px">
                                    </li>
                                    <li class="sponsor-item">
                                        <img src="/images/sponsor_teamviewer.png" alt="" height="35px">
                                    </li>
                                    <li class="sponsor-item">
                                        <img src="/images/sponsor_kohler.png" alt="" height="20px">
                                    </li>
                                </ul>
                                <div class="sponsors__divider"></div>
                            </div>
                            <div class="sub-menu">
                                <ul class="sub-menu-list">
                                    <li class="sub-menu-item">
                                        <a href="/auth" class="sub-menu-link">
                                            <span class="material-icons">logout</span>
                                            <p>Logout</p>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-10">
                        <div class="main-content main-content--statistic">
                            <div class="content__player-stat-header">
                                <div class="player-stat__avatar">
                                    <img src="<%= data.player.avatar %>" onerror="this.src='/images/logo.png'">
                                </div>
                                <div class="player-stat__header">
                                    <div class="player-stat__header-attribute">
                                        <div class="player-stat__header-name">
                                            <span><%= data.player.name %></span></span>
                                        </div>
                                        <div class="player-stat__header-number">
                                            <span>#<%= data.player.kit_number %></span>
                                        </div>
                                    </div>
                                    <div class="player-stat__header-attribute">
                                        <span class="player-stat__header-title">Position</span>
                                        <span><%= data.player.position %></span></span>
                                    </div>
                                    <div class="player-stat__header-attribute">
                                        <span class="player-stat__header-title">Nationality</span>
                                        <span><%= data.stat.player.nationality %></span>
                                    </div>
                                    <div class="player-stat__header-attribute">
                                        <span class="player-stat__header-title">Age</span>
                                        <span><%= data.stat.player.age %></span>
                                    </div>
                                    <div class="player-stat__header-attribute">
                                        <span class="player-stat__header-title">Weight</span>
                                        <span><%= data.stat.player.weight %></span>
                                    </div>
                                    <div class="player-stat__header-attribute">
                                        <span class="player-stat__header-title">Height</span>
                                        <span><%= data.stat.player.height %></span>
                                    </div>
                                </div>
                            </div>
                            <div class="content__player-stat-detail-row1">
                                <div class="player-stat--component" style="width: 20%;">
                                    <div class="stat-component--icon">
                                        <span class="material-icons">
                                            stars
                                        </span>
                                    </div>
                                    <div class="stat-component--data">
                                        <span class="stat-component--title">
                                            Rating
                                        </span>
                                        <span class="stat-component--content">
                                            <%= parseFloat(data.stat.statistics[0].games.rating).toFixed(2) %> 
                                        </span>
                                    </div>
                                </div>
                                <div class="player-stat--component" style="width: 20%;">
                                    <div class="stat-component--icon">
                                        <span class="material-icons">
                                            schedule
                                        </span>
                                    </div>
                                    <div class="stat-component--data">
                                        <span class="stat-component--title">
                                            Minutes
                                        </span>
                                        <span class="stat-component--content">
                                            <%= data.stat.statistics[0].games.minutes %>
                                        </span>
                                    </div>
                                </div>
                                <div class="player-stat--component" style="width: 20%;">
                                    <div class="stat-component--icon">
                                        <span class="material-icons" style="color:rgb(218, 214, 0);">
                                            pan_tool
                                        </span>
                                    </div>
                                    <div class="stat-component--data">
                                        <span class="stat-component--title">
                                            Yellow card
                                        </span>
                                        <span class="stat-component--content">
                                            <%= data.stat.statistics[0].cards.yellow %>
                                        </span>
                                    </div>
                                </div>
                                <div class="player-stat--component" style="width: 20%;">
                                    <div class="stat-component--icon">
                                        <span class="material-icons">
                                            pan_tool
                                        </span>
                                    </div>
                                    <div class="stat-component--data">
                                        <span class="stat-component--title">
                                            Red card
                                        </span>
                                        <span class="stat-component--content">
                                            <%= data.stat.statistics[0].cards.red %>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div id="data-response" data-response="<%= data %>"></div>
                            <div class="content__player-stat-detail-row2">
                                <div class="player-stat--component" style="width: 30%;">
                                    <div class="stat-component--chart">
                                        <canvas id="apprearenceChart"></canvas>
                                        <span class="component-chart--label-apprearence">
                                            <%= data.stat.statistics[0].games.appearences %>
                                        </span>
                                    </div>
                                </div>
                                <div class="player-stat--component" style="width: 30%;">
                                    <div class="stat-component--chart">
                                        <canvas id="passChart"></canvas>
                                        <span class="component-chart--label-passes">
                                            82%
                                        </span>
                                    </div>
                                </div>
                                <div class="player-stat--component" style="width: 30%;">
                                    <span class="component-position--title">
                                        Main position
                                    </span>
                                    <div class="stat-component--position">
                                        <div class="component-position--image">
                                            <img src="/images/kit.png" alt="">
                                        </div>
                                    </div>
                                    <div class="component-position--content">
                                        <span>CAM</span>
                                    </div>
                                </div>
                            </div>
                            <div class="content__player-stat-detail-row3">
                                <div class="player-stat--component" style="width: 45%; flex-direction: column;">
                                    <span class="player-stat--component-title">
                                        Attack statistics
                                    </span>
                                    <div class="stat-component--data-plus">
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                4
                                            </div>
                                            <span class="data-plus--title">
                                                Goals
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                18
                                            </div>
                                            <span class="data-plus--title">
                                                Shots
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                1
                                            </div>
                                            <span class="data-plus--title">
                                                Assists
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                6
                                            </div>
                                            <span class="data-plus--title">
                                                Key passes
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                100%
                                            </div>
                                            <span class="data-plus--title">
                                                Dribble rate
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="player-stat--component" style="width: 45%; flex-direction: column;">
                                    <span class="player-stat--component-title">
                                        Defense statistic
                                    </span>
                                    <div class="stat-component--data-plus">
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                5
                                            </div>
                                            <span class="data-plus--title">
                                                Drawn fouls
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                3
                                            </div>
                                            <span class="data-plus--title">
                                                Fouled
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                0
                                            </div>
                                            <span class="data-plus--title">
                                                Tackles
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                37%
                                            </div>
                                            <span class="data-plus--title">
                                                Duel rate
                                            </span>
                                        </div>
                                        <div class="data-plus--item" style="width: 18%;">
                                            <div class="data-plus--number">
                                                0
                                            </div>
                                            <span class="data-plus--title">
                                                Save
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- -------------------- -->
    <!-- Boostrap javascript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!--  Chart js  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.2/chart.min.js" integrity="sha512-tMabqarPtykgDtdtSqCL3uLVM0gS1ZkUAVhRFu1vSEFgvB73niFQWJuvviDyBGBH22Lcau4rHB5p2K2T0Xvr6Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        const dataResponseObject = document.getElementById('data-response');

        let dataResponse = dataResponseObject.datasets.response;

        console.log(dataResponse.stat);
        // const appearenceChartDataset = [
        //     dataResponse.stat.games.lineups,
        //     dataResponse.stat.substitutes.in,
        //     dataResponse.stat.substitutes.bench,
        //     dataResponse.round - dataResponse.stat.games.appearences - dataResponse.stat.substitutes.bench,
        // ];

        const ctx_appearence = document.getElementById('apprearenceChart').getContext('2d');
        const apprearenceChart = new Chart(ctx_appearence, {
            type: 'doughnut',
            data: {
                labels: [
                    'Line up',
                    'Subtitution in',
                    'Bench',
                    'Absent'
                ],
                datasets: [{
                    data: [6,1,1,9],
                    backgroundColor: [
                    'rgb(255, 99, 132)',
                    'rgb(54, 162, 235)',
                    'rgb(255, 205, 86)',
                    'rgb(200, 200, 200)'
                    ],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            font: {
                                size: 14,
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Appearences',
                        font: {
                            size: 20,
                        },
                        align: 'start',
                    },
                    layout: {
                        autoPadding: false,
                        padding: 0
                    }
                },
            },
        });

        const ctx_pass = document.getElementById('passChart').getContext('2d');
        const passChart = new Chart(ctx_pass, {
            type: 'doughnut',
            data: {
                labels: [
                    'Accuracy',
                    'Inaccuracy',
                ],
                datasets: [{
                    data: [161, 36],
                    backgroundColor: [
                    'rgb(64, 218, 0)',
                    'rgb(255, 66, 92)'
                    ],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            font: {
                                size: 14,
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Accurate per game',
                        font: {
                            size: 20,
                        },
                        align: 'start',
                    },
                    layout: {
                        autoPadding: false,
                        padding: 0
                    }
                },
            },
        });
    </script>
</body>
</html>